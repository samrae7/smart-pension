<div
  layout="row"
  layout-align="center"
>
  <md-whiteframe
    flex="100"
    flex-gt-xs="60"
    flex-gt-sm="40"
    class="sp-form-frame md-whiteframe-2dp"
    layout="column"
  >
      <md-toolbar>

        <div class="md-toolbar-tools">
          <h1 md-truncate flex>Register for SmartPension</h1>
        </div>

      </md-toolbar>
      <md-content layout-padding>
        <form
          name="register"
          novalidate
          ng-submit="vm.onSubmit(register)"
        >
          <h2 class="md-title md-primary">Company details</h2>
          <ng-form
              name="company"
              novalidate
            >
              <md-input-container class="md-block">
                <label>Company name</label>
                <input
                  ng-model="vm.company.name"
                  name="companyName"
                  required
                  unique-company-name
                >
                <div
                  ng-messages="company.companyName.$error"
                  ng-show="company.companyName.$touched || register.$submitted"
                >
                  <div ng-message="required">This is required.</div>
                  <div ng-message="uniqueCompanyName">Company name is already registered.</div>
                </div>
              </md-input-container>

              <md-input-container class="md-block">
                <label>Registration no.</label>
                <input
                  ng-model="vm.company.registrationNumber"
                  name="registrationNumber"
                  required
                >
                <div
                  ng-messages="company.registrationNumber.$error"
                  ng-show="company.registrationNumber.$touched || register.$submitted"
                >
                  <div ng-message="required">This is required.</div>
                </div>
              </md-input-container>

              <md-input-container class="md-block">
                <label>Legal structure</label>
                <md-select
                  ng-model="vm.company.legalStructure"
                  name="legalStructure"
                  required>
                  <md-option
                    ng-repeat="structure in vm.legalStructures"
                    value="{{structure}}"
                  >
                    {{structure}}
                  </md-option>
                </md-select>
                <div ng-messages="company.legalStructure.$error"
                     ng-show="company.legalStructure.$touched || register.$submitted">
                  <div ng-message="required">This is required.</div>
                </div>
              </md-input-container>
            </ng-form>

          <h2 class="md-title md-primary">Signatory details</h2>
          <ng-form
              name="signatory"
              novalidate
            >
              <md-input-container class="md-block">
                <label>Signatory forename</label>
                <input
                  ng-model="vm.company.signatory.forename"
                  type="text"
                  name="signatoryForename"
                  required
                >
                <div
                  ng-messages="signatory.signatoryForename.$error"
                  ng-show="signatory.signatoryForeName.$touched || register.$submitted"
                >
                  <div ng-message="required">This is required.</div>
                </div>
              </md-input-container>

              <md-input-container class="md-block">
                <label>Signatory surname</label>
                <input
                  ng-model="vm.company.signatory.surname"
                  name="signatorySurname"
                  required
                >
                <div
                  ng-messages="signatory.signatorySurname.$error"
                  ng-show="signatory.signatorySurname.$touched || register.$submitted"
                >
                  <div ng-message="required">This is required.</div>
                </div>
              </md-input-container>

              <md-input-container class="md-block">
                <label>Signatory email address</label>
                <input
                  ng-model="vm.company.signatory.email"
                  type="email"
                  name="signatoryEmail"
                  required
                >
                <div
                  ng-messages="signatory.signatoryEmail.$error"
                  ng-show="signatory.signatoryEmail.$touched || register.$submitted"
                >
                  <div ng-message="required">This is required.</div>
                  <div ng-message="email">Please enter a valid email address.</div>
                </div>
              </md-input-container>
            </ng-form>

          <h2 class="md-title md-primary">Administrator details</h2>
          <ng-form
            name="administrator"
            novalidate
          >
            <md-input-container class="md-block">
              <label>Administrator forename</label>
              <input
                ng-model="vm.company.admin.forename"
                name="adminFirstName" required
              >
              <div
                ng-messages="administrator.adminFirstName.$error"
                ng-show="administrator.adminFirstName.$touched || register.$submitted"
              >
                <div ng-message="required">This is required.</div>
              </div>
            </md-input-container>

            <md-input-container class="md-block">
              <label>Signatory surname</label>
              <input
                ng-model="vm.company.admin.surname"
                name="adminSurname"
                required
              >
              <div
                ng-messages="administrator.adminSurname.$error"
                ng-show="administrator.signatorySurname.$touched || register.$submitted"
              >
                <div ng-message="required">This is required.</div>
              </div>
            </md-input-container>

            <md-input-container class="md-block">
              <label>Administrator email address</label>
              <input
                ng-model="vm.company.admin.email"
                type="email"
                name="adminEmail"
                required
                server-email-check
              >
              <div
                ng-messages="administrator.adminEmail.$error"
                ng-show="administrator.adminEmail.$touched || register.$submitted"
              >
                <div ng-message="required">This is required.</div>
                <div ng-message="email">Please enter a valid email address.</div>
              </div>
            </md-input-container>
          </ng-form>
          <div layout="row">
            <md-button
              flex="20"
              type="submit"
              class="md-raised md-primary"
            >
              Submit
            </md-button>
            <div layout="column" flex="80" >
              <div
                ng-repeat="error in vm.serverErrors"
                class="sp-server-error-message md-caption"
              >
                {{error.message}}
              </div>
            </div>
          </div>


        </form>
      </md-content>
    </md-whiteframe>
</div>

